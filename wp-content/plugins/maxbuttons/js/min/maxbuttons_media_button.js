var maxMedia;jQuery(document).ready(function($){var maxMedia=function(){callback=null,window_loaded=null,maxm=null};maxMedia.prototype.init=function(){this.maxm=new maxModal,this.maxm.init(),$(document).on("click",".maxbutton_media_button",$.proxy(this.clickAddButton,this)),this.callback="this.buttonToEditor"},maxMedia.prototype.setCallback=function(callback){if("function"!=typeof callback)if("function"==typeof window[callback])callback=window[callback];else{if("function"!=typeof eval(callback))return!1;callback=eval(callback)}this.callback=callback},maxMedia.prototype.clickAddButton=function(t){t.preventDefault(),t.stopPropagation(),$(document).off("click",".pagination span");var a=this;"undefined"!=typeof $(t.target).data("callback")&&this.setCallback($(t.target).data("callback")),$(document).off("click",".mb_add_button"),$(document).on("click",".mb_add_button",$.proxy(function(t){t.preventDefault();var n=$(t.target).data("button");"function"==typeof a.callback&&a.callback(n,$(t.target)),this.maxm.close()},this)),$(document).on("click",".pagination span, .pagination-links a",function(t){if(t.preventDefault(),$(t.target).hasClass("disabled"))return!1;var n=$(t.target).data("page");1>=n&&(n=1),a.loadPostEditScreen(n)}),$(document).on("change",".input-paging",function(t){t.preventDefault();var n=parseInt($(t.target).val());a.loadPostEditScreen(n)}),this.loadPostEditScreen(0)},maxMedia.prototype.loadPostEditScreen=function(t){"undefined"==typeof t&&(t=0);var a={action:"getAjaxButtons",paged:t},n=mbtrans.ajax_url,e=this;return $(".media-buttons .loading").css("visibility","visible"),$.ajax({url:n,data:a,success:function(t){e.putResults(t)}}),!1},maxMedia.prototype.showPostEditScreen=function(){this.maxm.parent="#poststuff",this.maxm.newModal("media-buttons"),this.maxm.setTitle(mbtrans.windowtitle),$(document).trigger("mb_media_buttons_open",this.maxm),this.maxm.show(),this.window_loaded=!0},maxMedia.prototype.putResults=function(t){this.showPostEditScreen(),$(".media-buttons .loading").css("visibility","hidden"),this.maxm.setContent(t),this.maxm.addControl("cancel","",$.proxy(this.maxm.close,this.maxm)),this.maxm.setControls(),this.maxm.checkResize(),$(document).on("click",".maxbutton-preview",function(t){t.preventDefault()}),$(document).trigger("mb_media_put_results",t)},maxMedia.prototype.buttonToEditor=function(t){window.send_to_editor('[maxbutton id="'+t+'"]')},maxMedia.prototype.getEditor=function(){var t='line-height: 32px; padding-left: 40px; background: url("'+mbtrans.icon+'") no-repeat',a=$("<div>",{id:"maxbutton-add-button","class":"content"});return a.append($("<h2>",{style:t}).text(mbtrans.insert)).append($("<p>").text(mbtrans.select)).append($("<div>",{id:"mb_media_buttons"}).append('<div class="loading"></div>')),a},maxMedia=new maxMedia,maxMedia.init(),window.maxMedia=maxMedia});